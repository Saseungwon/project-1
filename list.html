<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="../js/jsp.js"></script>
    <title>Document</title>
<style>
    /* 현재 페이지만 크게 보이겡*/
    .cl_cur {
        font-size:50px;
        color:red;
    }
</style>
</head>
<body>
<h1>볼품없는 게시판 리스트</h1>
<hr>
<div id="id_disp"></div>
<script>
    var v_disp = document.getElementById("id_disp");
    var v_tblName="uglyGesi";
    var v_gulDatas = JSON.parse(localStorage.getItem(v_tblName));

    //page 나누기
    var v_gsPerPage = 10;  // 페이지당 나오는 글의 수
    var v_totalGs = v_gulDatas.length;  // 108
    var v_totalPageSu = Math.ceil(v_totalGs / v_gsPerPage); // 토탈 페이지 수

    var v_curPage = 1; //  현재 페이지를 나타내는 변수, 일단 1페이지라고 가정
    if(request.getParameter("pg_num")){
        v_curPage = request.getParameter("pg_num"); //아래에서 a태그에 준 pg_num의 파라미터를 받아옴
    }

    var v_startNum =  (v_curPage -1) * v_gsPerPage; // (1-1) * 10 = 0 
    var v_endNum = v_startNum +  v_gsPerPage;    // 0 + 10 =10

    if(v_curPage == v_totalPageSu){ //마지막페이지 출력
        v_endNum = v_totalGs; //배열의 마지막 index번호
    } 

    var v_tblStr = "<form action='del_ck.html' method=get>";
    v_tblStr += "<table border=1 width=400>";
    v_tblStr += "<tr><td>넘버</td><td>삭제선택</td><td>글제목</td><td>글쓴이</td><td>날짜</td></tr>";

    for(var i=v_startNum; i<v_endNum; i++){
        v_tblStr += "<tr>";
        v_tblStr += "<td>" + (i+1) + "</td>";
        v_tblStr += "<td><input type=checkbox name=nm_del value=" + v_gulDatas[i].ggg + "></td>";
        v_tblStr += "<td><a href=read.html?g_id=" + v_gulDatas[i].ggg + ">" + v_gulDatas[i].title + "</a></td>";
        v_tblStr += "<td>" + v_gulDatas[i].writer + "</td>";
        v_tblStr += "<td>" + v_gulDatas[i].date + "</td>";
        v_tblStr += "</tr>";
    }
    v_tblStr += "</table>";
    v_tblStr += "<a href=write.html>글쓰기</a><br>";
    v_tblStr += "<input type=submit value='선택한 것만 삭제'><br></form>";
    //페이지 넘버 출력
    for(var i=1; i <= v_totalPageSu; i++){
        if(i== v_curPage){
            v_tblStr += "<a class=cl_cur href=list.html?pg_num=" + i + ">"+ i +"</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;";
        }else {
            v_tblStr += "<a href=list.html?pg_num=" + i + ">"+ i +"</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;";
        }
    }

    v_disp.innerHTML = v_tblStr;   // 화면 출력
</script>   
 
</body>
</html>